<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <main class="main">
        <div class="main__head">
            <div class="main__head-wrapper">
                <div class="letter">
                    <div class="letter__item">С</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter"></div>
                <div class="letter">
                    <div class="letter__item">д</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">н</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">ё</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">м</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter"></div>
                <div class="letter">
                    <div class="letter__item">р</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">о</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">ж</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">д</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">е</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">н</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">и</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">я</div>
                    <div class="white-bg"></div>
                </div>
            </div>

            <div class="main__head-wrapper">
                <div class="letter">
                    <div class="letter__item">м</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">а</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">к</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">с</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">и</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">м</div>
                    <div class="white-bg"></div>
                </div>
                <div class="letter">
                    <div class="letter__item">!</div>
                    <div class="white-bg"></div>
                </div>
            </div>
        </div>
        <div id="circle">
            <div class="circle_wrapper">
                <img src="./img/whell.svg" alt="">
            </div>
            <div class="arrow-win">
                <svg width="25" height="86" viewBox="0 0 25 86" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g filter="url(#filter0_d_3502_46546)">
                        <path d="M13.2 78H3.2L5.6 19.5H0L8 0L16 19.5H10.8L13.2 78Z" fill="#FDB54A" />
                    </g>
                    <defs>
                        <filter id="filter0_d_3502_46546" x="0" y="0" width="25" height="86"
                            filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix" />
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                            <feOffset dx="5" dy="4" />
                            <feGaussianBlur stdDeviation="2" />
                            <feComposite in2="hardAlpha" operator="out" />
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3502_46546" />
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3502_46546"
                                result="shape" />
                        </filter>
                    </defs>
                </svg>
            </div>
            <div class="person">
                <img src="./img/person.png" alt="">
            </div>
        </div>
        <button onclick="spinWheel()" class="whell-btn">ЖМИ</button>
        <p id="result"></p>
    </main>
</body>


<script>
    const letters = document.querySelectorAll('.letter__item');
    letters.forEach((item, i) => {
        item.style.transitionDelay = `${i * 150}ms`;
        item.nextElementSibling.style.transitionDelay = `${i * 150}ms`;
    });
    window.onload = () => {
        letters.forEach((item) => {
            item.classList.add('active');
        });
    }

    // Определение текущего угла поворота
    const circle = document.querySelector('.circle_wrapper');
    let currentAngle = 0;
    function spinWheel() {
        // Добавление 360 градусов к текущему углу поворота
        currentAngle += 360;
        // Определение сектора, на котором круг остановится
        const sector = Math.floor(Math.random() * 9) + 1;
        // Расчет угла поворота круга на основе текущего угла поворота и выбранного сектора
        const angle = 40 * sector + currentAngle;
        // Анимация вращения круга
        circle.style.transform = "rotate(" + (angle) + "deg)";
        circle.style.transition = "transform 3s ease-in-out";
        // Вывод результата
        const result = document.getElementById("result");
        result.innerHTML = "Круг остановился на секторе " + (sector + 1);
    }


    const spinnerBtn = document.querySelector('.whell-btn');
    circle.addEventListener('transitionstart', (e) => {
        spinnerBtn.classList.add('spin')
    });

    circle.addEventListener('transitionend', (e) => {
        spinnerBtn.classList.remove('spin')
    });


</script>

</html>